<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.team3.user.interest.dao.mapper">
	  <select id="nearestList" parameterType="String" resultType="com.team3.user.interest.dto.InterestDto">
	  	<![CDATA[
		  	SELECT n.image_path, publisher, title, NAME, id, isbn, cart_day, state
			FROM (SELECT b.image_path, b.publisher, b.title, b.writer_number,c.state, c.id, c.isbn,c.cart_day FROM book b, cart C WHERE C.isbn=b.isbn) n, writer w
			WHERE w.writer_number = n.writer_number and n.state = 1 and n.id=#{id}
		]]>
	  </select>
	  <update id="nearestUp" parameterType="java.util.Map">
	  	update cart set state=0 where id=#{id} and isbn=#{str}
	  </update>
	  <delete id="nearestDel" parameterType="java.util.Map">
	  	delete from cart where id=#{id} and isbn=#{str}
	  </delete>
	  <select id="wishList" parameterType="String" resultType="com.team3.user.interest.dto.InterestDto">
	  	<![CDATA[
		  	SELECT image_path, publisher, title, NAME, id, isbn, cart_day, state
			FROM (SELECT b.image_path, b.publisher, b.title, b.writer_number,c.state, c.id, c.isbn,c.cart_day FROM book b, cart C WHERE C.isbn=b.isbn) n, writer w
			WHERE w.writer_number = n.writer_number and n.state = 2 and n.id=#{id}
		]]>
	  </select>
  </mapper>